import{u as m,a as p,j as e,t as f,b as c,d as l,c as d,e as b,p as y}from"./clsx.BvPrlDpU.js";import{r as i}from"./index.Cd_D0zHu.js";import{d as h}from"./db.Kh0F__tJ.js";function N(){const o=m(f);i.useEffect(()=>{const r=localStorage.getItem("theme");r&&p(r)},[]),i.useEffect(()=>{o==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",o)},[o]);const a=()=>{p(o==="dark"?"light":"dark")};return e.jsx("button",{onClick:a,className:"p-2 rounded-lg bg-gray-100 dark:bg-zinc-800 text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-zinc-700 transition-colors","aria-label":"Toggle theme",children:o==="dark"?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"})}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"})})})}function M(){const o=m(y),a=m(b),[r,w]=i.useState(!0),[g,x]=i.useState(!1);i.useEffect(()=>{j()},[]);const j=async()=>{try{const t=await h.getProjects();c(t.sort((s,n)=>n.updatedAt-s.updatedAt)),t.length>0&&!a&&l(t[0].id)}catch(t){console.error("Failed to load projects",t)}},u=async()=>{x(!0);try{const t=`Proyecto ${o.length+1}`,s=await h.createProject(t);c([s,...o]),l(s.id)}catch(t){console.error("Failed to create project",t)}finally{x(!1)}},k=async(t,s)=>{if(t.stopPropagation(),!!confirm("¿Estás seguro de eliminar este proyecto?"))try{await h.deleteProject(s);const n=o.filter(v=>v.id!==s);c(n),a===s&&l(n.length>0?n[0].id:null)}catch(n){console.error("Failed to delete project",n)}};return e.jsxs("aside",{className:d("fixed left-0 top-0 h-full z-20 flex flex-col bg-white dark:bg-zinc-900 border-r border-gray-200 dark:border-zinc-800 transition-all duration-300",r?"w-64":"w-16"),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-zinc-800",children:[r&&e.jsx("h1",{className:"text-xl font-bold text-indigo-600 dark:text-indigo-400 truncate",children:"draw2ui"}),e.jsx("button",{onClick:()=>w(!r),className:"p-1.5 rounded-md hover:bg-gray-100 dark:hover:bg-zinc-800 text-gray-500",title:r?"Colapsar sidebar":"Expandir sidebar",children:r?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto py-4 px-2 space-y-2",children:[r&&e.jsxs("button",{onClick:u,disabled:g,className:"w-full flex items-center gap-2 px-3 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors text-sm font-medium",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"Nuevo Proyecto"]}),!r&&e.jsx("button",{onClick:u,disabled:g,className:"w-full flex justify-center p-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors",title:"Nuevo Proyecto",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})}),e.jsx("div",{className:"mt-6 space-y-1",children:o.map(t=>e.jsxs("div",{className:d("group flex items-center justify-between px-3 py-2 rounded-lg cursor-pointer transition-colors",a===t.id?"bg-gray-100 dark:bg-zinc-800 text-indigo-600 dark:text-indigo-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-zinc-800/50"),onClick:()=>l(t.id),title:t.name,children:[e.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 shrink-0",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),r&&e.jsx("span",{className:"text-sm font-medium truncate",children:t.name})]}),r&&e.jsx("button",{onClick:s=>k(s,t.id),className:"opacity-0 group-hover:opacity-100 p-1 hover:text-red-500 transition-opacity",title:"Eliminar",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})})})]},t.id))})]}),e.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-zinc-800",children:e.jsxs("div",{className:d("flex items-center",r?"justify-between":"justify-center"),children:[r&&e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Tema"}),e.jsx(N,{})]})})]})}export{M as default};
